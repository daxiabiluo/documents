# 6.3 MQTT离线存储与续传

### 6.3.1 离线存储

　　在mqtt离线时，网关会根据实时主题的上传周期将数据缓存起来。

​		下表以100个缓存点举例，其他数据点规模供参考。

|         网关          | 容量  | 采集点 | 上传周期 | 缓存天数 |
| :-------------------: | :---: | :----: | :------: | :------: |
| IoTlite精简版物联网关 |  20M  |  100   |   10秒   |    10    |
|      IoT物联网关      | 2000M |  100   |   10秒   |   1000   |

​		当离线数据大于存储容量时，网关就会缓存新的一条离线数据时，删除最早的一条离线数据。

### 6.3.２ 断点续传

　　在mqtt恢复连接时，网关会通过离线主题依次发布缓存数据。

　　离线主题上传周期：IoTlite精简版物联网关建议设置5000ms以上，IoT物联网关建议设置1000ms以上。

![连接主题](assets/%E7%A6%BB%E7%BA%BF%E4%B8%BB%E9%A2%98.png)